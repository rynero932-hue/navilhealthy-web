<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navil Healthy - Premium Store</title>
    
    <!-- FAVICON (LOGO DI TAB BROWSER) -->
    <link rel="icon" href="https://blogger.googleusercontent.com/img/a/AVvXsEgQHDc6LP6GyOMvoh2xZKBtvg5TX4XPDTpLT-23BTberMQuAJIyR2MqY0zQfWBnepwqT3PuWWQsz7Z61znEho8CIq5xt_JOg_iqxUiFOb7cXhA1gOlWN525BtUV3ta6nYFdOrnFnypo-HBCgqGXd3qIcwVabP-eCy9xyd1ucvMLjrmZPOv925TeHjan21g">

    <!-- FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ===== VARIABLES (THEME GOLD) ===== */
        :root {
            --primary: #15803d; 
            --primary-gradient: linear-gradient(135deg, #15803d 0%, #166534 100%);
            --gold: #d97706;
            --gold-gradient: linear-gradient(45deg, #b45309, #d97706, #fbbf24);
            
            /* Dark Mode Default */
            --bg-body: #0f172a;
            --bg-pattern: url("https://www.transparenttextures.com/patterns/arabesque.png");
            --bg-card: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --border: #334155;
            --shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.5);
        }

        [data-theme="light"] {
            --bg-body: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* ===== GLOBAL ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; transition: all 0.3s ease; }
        body { 
            font-family: 'Poppins', sans-serif; background-color: var(--bg-body); 
            background-image: var(--bg-pattern); background-attachment: fixed;
            color: var(--text-main); padding-bottom: 80px; 
        }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        a { text-decoration: none; color: inherit; }
        button { cursor: pointer; font-family: inherit; }
        select { font-family: 'Poppins', sans-serif; cursor: pointer; }

        /* ===== NAVBAR ===== */
        .navbar {
            position: sticky; top: 0; z-index: 1000;
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border); padding: 15px 0;
        }
        .nav-container {
            max-width: 1200px; margin: auto; padding: 0 20px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { 
            font-size: 24px; font-weight: 700; color: var(--primary); 
            display: flex; align-items: center; gap: 8px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .cart-icon-nav { font-size: 24px; position: relative; cursor: pointer; color: white; }
        .badge {
            position: absolute; top: -5px; right: -8px; 
            background: var(--gold-gradient); color: white;
            font-size: 11px; width: 20px; height: 20px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-weight: bold;
        }

        /* ===== HERO SECTION ===== */
        .hero {
            position: relative; height: 500px; display: flex; align-items: center; justify-content: center;
            text-align: center; color: white; overflow: hidden; border-bottom: 4px solid var(--gold);
        }
        .hero-bg {
            position: absolute; inset: 0; background-size: cover; background-position: center;
            opacity: 0; transition: opacity 1s ease; z-index: 1; transform: scale(1.1);
        }
        .hero-bg.active { opacity: 1; transform: scale(1); transition: opacity 1s, transform 6s; }
        .hero-overlay { position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(15, 23, 42, 0.4), rgba(15, 23, 42, 0.9)); z-index: 2; }
        .hero-content { position: relative; z-index: 10; max-width: 800px; padding: 20px; }
        .hero h1 { font-size: 42px; margin-bottom: 10px; text-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .cta-btn {
            background: var(--gold-gradient); color: white; padding: 14px 40px; border-radius: 50px;
            font-weight: 700; border: 2px solid rgba(255,255,255,0.3); font-size: 16px; 
            box-shadow: 0 0 20px rgba(217, 119, 6, 0.5);
        }
        .cta-btn:hover { transform: scale(1.05); box-shadow: 0 0 30px rgba(217, 119, 6, 0.8); }

        /* ===== TRUST BAR ===== */
        .trust-bar {
            background: var(--primary-gradient); color: #fef3c7; padding: 12px; 
            text-align: center; font-size: 13px; font-weight: 600; letter-spacing: 1px;
            position: relative; z-index: 20; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* ===== CONTROLS ===== */
        .container { max-width: 1200px; margin: 50px auto; padding: 0 20px; }
        .section-title { text-align: center; margin-bottom: 40px; }
        .section-title h2 { 
            color: var(--gold); font-size: 32px; font-weight: 700; text-transform: uppercase; letter-spacing: 2px;
            background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        .controls { 
            background: var(--bg-card); padding: 15px; border-radius: 15px;
            box-shadow: var(--shadow); margin-bottom: 30px; display: flex; flex-direction: column; gap: 15px; border: 1px solid var(--border);
        }
        .search-input {
            width: 100%; padding: 15px; border-radius: 10px; border: 1px solid var(--border);
            background: var(--bg-body); color: var(--text-main); font-size: 16px; outline: none;
        }
        .categories { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        .cat-btn {
            padding: 10px 25px; border-radius: 50px; border: 1px solid var(--border);
            background: var(--bg-body); color: var(--text-main); white-space: nowrap; font-weight: 500;
        }
        .cat-btn.active { background: var(--gold-gradient); color: white; border-color: transparent; }

        /* ===== PRODUCT CARD & SLIDER ===== */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 25px; }
        .card {
            background: var(--bg-card); border-radius: 20px; overflow: hidden;
            box-shadow: var(--shadow); border: 1px solid var(--border);
            display: flex; flex-direction: column; position: relative;
        }
        .card:hover { transform: translateY(-8px); border-color: #fbbf24; }

        .img-wrapper { position: relative; height: 260px; background: #eee; overflow: hidden; }
        .card-img { width: 100%; height: 100%; object-fit: cover; transition: opacity 0.3s; }
        
        /* Slider Controls */
        .slider-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 30px; height: 30px; background: rgba(0,0,0,0.6);
            border-radius: 50%; border: 1px solid rgba(255,255,255,0.3); color: white;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; opacity: 0; transition: 0.3s; z-index: 10;
        }
        .card:hover .slider-btn { opacity: 1; }
        .prev-btn { left: 10px; } .next-btn { right: 10px; }
        .slider-btn:hover { background: var(--gold); }
        
        .dots-container {
            position: absolute; bottom: 10px; width: 100%; display: flex; 
            justify-content: center; gap: 5px; z-index: 5;
        }
        .dot { width: 6px; height: 6px; background: rgba(255,255,255,0.5); border-radius: 50%; }
        .dot.active { background: var(--gold); width: 15px; border-radius: 10px; }

        .card-body { padding: 20px; display: flex; flex-direction: column; flex: 1; }
        .product-cat { font-size: 11px; text-transform: uppercase; color: var(--gold); font-weight: 700; }
        .product-name { font-size: 17px; font-weight: 700; margin: 8px 0; color: var(--text-main); font-family: 'Playfair Display', serif; height: 50px; overflow: hidden; }
        .product-info { font-size: 12px; color: var(--text-muted); background: rgba(128,128,128,0.1); padding: 5px 10px; border-radius: 5px; width: fit-content; margin-bottom: 10px; }
        .product-price { font-size: 20px; font-weight: 700; color: var(--primary); margin-top: auto; }
        .start-from { font-size: 12px; font-weight: 400; color: var(--text-muted); }
        
        .card-actions { margin-top: 15px; display: grid; grid-template-columns: 1fr 2fr; gap: 10px; }
        .btn-outline { border: 1px solid var(--border); background: transparent; color: var(--text-main); border-radius: 10px; font-weight: 600; font-size: 13px; }
        .btn-fill { 
            background: var(--primary-gradient); color: white; border: none; 
            border-radius: 10px; font-weight: 600; font-size: 13px;
            box-shadow: 0 4px 10px rgba(22, 101, 52, 0.2);
        }

        /* ===== SOSMED SECTION ===== */
        .socmed-section { background: var(--bg-card); padding: 50px 20px; margin-top: 50px; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); }
        .socmed-grid { max-width: 1000px; margin: auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .socmed-card {
            background: var(--bg-body); padding: 20px; border-radius: 20px; border: 1px solid var(--border);
            display: flex; align-items: center; gap: 15px; transition: 0.3s;
        }
        .socmed-card:hover { transform: translateY(-5px); border-color: var(--gold); box-shadow: var(--shadow); }
        .icon-box {
            width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center;
            font-size: 24px; color: white; flex-shrink: 0; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .wa-icon { background: linear-gradient(135deg, #25D366, #128C7E); }
        .shopee-icon { background: linear-gradient(135deg, #EE4D2D, #C33518); }
        .ig-icon { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }
        .socmed-info h3 { font-size: 16px; font-weight: 700; color: var(--text-main); }
        .socmed-info p { font-size: 13px; color: var(--text-muted); }

        /* ===== MODAL & VARIANT SELECTOR ===== */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(5px); }
        .overlay.active { display: flex; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from {opacity:0} to {opacity:1}}
        
        .modal-box { 
            background: var(--bg-card); width: 100%; max-width: 500px; border-radius: 20px; padding: 25px; 
            position: relative; max-height: 90vh; overflow-y: auto; border: 1px solid var(--border);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }
        .close-btn { position: absolute; top: 15px; right: 15px; font-size: 28px; cursor: pointer; color: var(--text-muted); z-index: 20; }
        
        /* Modal Slider */
        .modal-img-wrapper { position: relative; width: 100%; border-radius: 12px; overflow: hidden; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .modal-main-img { width: 100%; height: 300px; object-fit: cover; transition: opacity 0.3s; }
        .modal-slider-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 40px; height: 40px; background: rgba(0,0,0,0.6);
            border-radius: 50%; border: 1px solid rgba(255,255,255,0.3); color: white;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 18px; z-index: 10;
        }
        .modal-slider-btn:hover { background: var(--gold); }
        .modal-prev { left: 10px; } .modal-next { right: 10px; }

        .variant-group { margin-top: 15px; }
        .variant-label { font-size: 14px; font-weight: 600; margin-bottom: 8px; display: block; color: var(--text-main); }
        .variant-select {
            width: 100%; padding: 12px; border-radius: 10px; border: 1px solid var(--gold);
            background: var(--bg-body); color: var(--text-main); font-size: 15px;
            appearance: none; -webkit-appearance: none;
        }

        /* ===== CART SIDEBAR ===== */
        .cart-sidebar {
            position: fixed; top: 0; right: -100%; width: 100%; max-width: 380px; height: 100%;
            background: var(--bg-card); z-index: 2500; transition: 0.4s;
            box-shadow: -10px 0 30px rgba(0,0,0,0.3); display: flex; flex-direction: column;
        }
        .cart-sidebar.active { right: 0; }
        .cart-header { padding: 25px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        
        /* FLOATING BTNS */
        .theme-btn { position: fixed; bottom: 25px; left: 25px; width: 55px; height: 55px; background: var(--bg-card); border-radius: 50%; border: 2px solid var(--gold); z-index: 3000; font-size: 24px; display: flex; align-items: center; justify-content: center; color: var(--gold); }
        .float-cart { position: fixed; bottom: 25px; right: 25px; width: 65px; height: 65px; background: var(--primary-gradient); color: white; border-radius: 50%; z-index: 2900; font-size: 28px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(22, 101, 52, 0.5); border: 3px solid #fff; }

        /* FOOTER */
        footer { background: #0f172a; color: #94a3b8; padding: 60px 20px 30px; text-align: center; }
        .footer-grid { max-width: 1000px; margin: auto; display: grid; gap: 30px; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); text-align: left; }
        .footer-col h4 { color: var(--gold); margin-bottom: 20px; font-size: 18px; }

        @media(max-width: 768px) {
            .hero { height: 400px; }
            .hero h1 { font-size: 32px; }
            .product-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
            .img-wrapper { height: 170px; }
            .card-body { padding: 12px; }
            .product-name { font-size: 14px; height: 42px; }
            .product-price { font-size: 15px; }
            .btn-outline, .btn-fill { font-size: 11px; padding: 8px; }
            .modal-main-img { height: 250px; }
        }
    </style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="nav-container">
        <div class="logo">Navil Healthy</div>
        <div class="cart-icon-nav" onclick="toggleCart()">
            üõí <span class="badge" id="cart-count">0</span>
        </div>
    </div>
</nav>

<!-- HERO -->
<div class="hero">
    <div class="hero-overlay"></div>
    <div class="hero-bg active" style="background-image: url('https://png.pngtree.com/thumb_back/fw800/background/20240125/pngtree-date-food-of-ramadan-kareem-night-image_15569417.png');"></div>
    <div class="hero-bg" style="background-image: url('https://images.unsplash.com/photo-1519817650390-64a93db51149?q=80&w=1470&auto=format&fit=crop');"></div>
    <div class="hero-content">
        <h1>Ramadhan Berkah <br><span style="color:var(--gold)">Keluarga Bahagia</span></h1>
        <p>Ahlan Wa Sahlan di toko Navil Healthy</p>
        <button class="cta-btn" onclick="document.getElementById('catalog').scrollIntoView()">Belanja Sekarang</button>
    </div>
</div>

<div class="trust-bar">‚ú® ORIGINAL ‚Ä¢ PILIHAN VARIAN LENGKAP ‚Ä¢ KIRIM SELURUH INDONESIA ‚ú®</div>

<!-- CATALOG -->
<div class="container" id="catalog">
    <div class="section-title">
        <h2>Koleksi Pilihan</h2>
        <p>Silakan pilih varian ukuran atau tipe sesuai kebutuhan Anda</p>
    </div>

    <div class="controls">
        <input type="text" id="searchInput" class="search-input" placeholder="üîç Cari nama produk..." onkeyup="renderStore()">
        <div class="categories">
            <button class="cat-btn active" onclick="filterCat('all', this)">Semua</button>
            <button class="cat-btn" onclick="filterCat('kurma', this)">Kurma</button>
            <button class="cat-btn" onclick="filterCat('pakaian', this)">Busana</button>
            <button class="cat-btn" onclick="filterCat('minuman', this)">Herbal</button>
            <button class="cat-btn" onclick="filterCat('makanan', this)">Hampers</button>
        </div>
    </div>

    <div class="product-grid" id="productGrid"></div>
</div>

<!-- SOCMED SECTION -->
<section class="socmed-section">
    <div class="section-title">
        <h2>Belanja Lebih Mudah</h2>
        <p>Kunjungi kami di platform kesayangan Anda</p>
    </div>
    <div class="socmed-grid">
        <a href="https://wa.me/6281286467275" target="_blank" class="socmed-card">
            <div class="icon-box wa-icon">üìû</div>
            <div class="socmed-info">
                <h3>WhatsApp</h3>
                <p>Konsultasi & Order Cepat</p>
            </div>
        </a>
        <a href="https://shopee.co.id/ai932store?entryPoint=ShopBySearch&searchKeyword=navil%20healthy" target="_blank" class="socmed-card">
            <div class="icon-box shopee-icon">üõçÔ∏è</div>
            <div class="socmed-info">
                <h3>Shopee</h3>
                <p>Navil Healthy Store</p>
            </div>
        </a>
        <a href="#" class="socmed-card">
            <div class="icon-box ig-icon">üì∏</div>
            <div class="socmed-info">
                <h3>Instagram</h3>
                <p>@navilhealthy</p>
            </div>
        </a>
    </div>
</section>

<!-- FOOTER -->
<footer>
    <div class="footer-grid">
        <div class="footer-col">
            <h4>üåø Navil Healthy</h4>
            <p>Sahabat sehat keluarga muslim. Menyediakan produk sunnah berkualitas tinggi sejak 2024.</p>
        </div>
        <div class="footer-col">
            <h4>Layanan</h4>
            <p>Cara Pemesanan<br>Cek Resi<br>Garansi Produk</p>
        </div>
        <div class="footer-col">
            <h4>Hubungi Kami</h4>
            <p>üìç Solo, Jawa Tengah<br>üìû 0812 8646 7275</p>
        </div>
    </div>
    <div style="margin-top:40px; border-top:1px solid #1e293b; padding-top:20px; font-size:13px;">&copy; 2024 Navil Healthy Store. All Rights Reserved.</div>
</footer>

<!-- MODAL DETAIL & VARIAN -->
<div class="overlay" id="productModal">
    <div class="modal-box">
        <div class="close-btn" onclick="closeModal()">√ó</div>
        <div id="modalContent"></div>
    </div>
</div>

<!-- CART SIDEBAR -->
<div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
        <h3>Keranjang</h3>
        <span onclick="toggleCart()" style="cursor:pointer; font-size:28px">√ó</span>
    </div>
    <div class="cart-items" id="cartList" style="flex:1; overflow-y:auto; padding:20px;"></div>
    <div class="cart-footer" style="padding:20px; border-top:1px solid var(--border); background:var(--bg-body)">
        <div style="display:flex; justify-content:space-between; margin-bottom:15px; font-weight:bold; color:var(--text-main);">
            <span>Total:</span>
            <span id="totalPrice" style="color:var(--gold); font-size:18px;">Rp 0</span>
        </div>
        <button class="btn-fill" style="width:100%; padding:15px; font-size:16px;" onclick="checkout()">Checkout WhatsApp üì≤</button>
    </div>
</div>

<!-- UTILS -->
<button class="theme-btn" onclick="toggleTheme()" title="Ganti Tema">üí°</button>
<div class="float-cart" onclick="toggleCart()">üõí</div>

<script>
    /* 
       DATA PRODUK (Lengkap: Gambar Slide & Varian)
    */
    const products = [
        { 
            id: 101, cat: "kurma", name: "Tunis Madu Sapphire", price: 245000, 
            info: "Best Seller", 
            images: ["https://blogger.googleusercontent.com/img/a/AVvXsEhdsbI04IEMU4jzATo-bd_wHam1thVKYjHxFDy4pmVHzQlhf888o0m_5QYhjv-Q9QFxTLQDMZJi3R7zPlX-9A2MQyYH_H6veA4Vwfji6L6ajlPXn-pV8z33LwNubO0oT5KeOEf7fu_no8VuLh49gs6YaI5Dp3gJILEfaCD-bbLGvD7IAIkSGOCXsCXmyas=w455-h455", "https://blogger.googleusercontent.com/img/a/AVvXsEhESiKD2qQvP97zz6_mAjanB7db1l0RzdeMDqy3Rbztj6TmWcWHKqiTkZ9ZqNOfAaLy8m8Q4HM0Mhff1RCN1xBEzl86kTMFk-m9-eA7kedcUcwCPEtvRebDx-IoisEXXReLutOfBEcKfLzrFGqe96gbrTnapWq1W2hsGtfq0yOlWUidA1pymoN8Cnhmm3M=w409-h545"],
            variants: [ { name: "5kg (1dus)", price: 245000 }, { name: "5kg (5dus)", price: 230000 }, { name: "5 Kg (10dus)", price: 225000 } ]
        },
        { 
            id: 104, cat: "kurma", name: "Kurma Mesir Golden Valley", price: 260000, 
            info: "Manis Legit", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEiKLnUdCQ8PzJ3giiTBCPiYYFRCLrq4HsOIXqsDWUEA7TGeDzgAsOVuT6WawIro4SeHCCOF14upGdpytfjit7p_98SbPbP6fffLmZOJNTlpO9h8X5Mi-kym0UOWeTBmY9UEkeK4HdzgxHwHOCqK3l2O30vr1bgkymcfhC00rNV6_2ZkmGl2cxibErSgXjw=w350-h350", "https://blogger.googleusercontent.com/img/a/AVvXsEiJNdc2fae-0VSB6rJVOm4bHHdgYj9MUKYnLEdOmehxliEU2bjEZKxCHWlHc14IAOgzsXYeAdiN9sa31oeYRiYZ7oRKE8QEsVgZUMylEJD2fGyrQcKDcdW62jS3LOyK8mbQOrDH2XjlRqYxgogXRYq33ZU2H_kDvpCqUtTWsyyPi5dVs0Q5O-I7i35JoG0=w356-h356"],
            variants: [ { name: "1 Kg Repack", price: 30000 }, { name: "10 Kg (Dus)", price: 260000 } ]
        },
        { 
            id: 102, cat: "kurma", name: "Tunisia Tangkai Al-Fihri", price: 290000, 
            info: "Premium", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEj9FtjFrVm6G4__hmOsL7McvBPaWyjt35kWc3OnBBLkLFTaa4ROfczqfCr4r5KGMKaP1edYneHDrfGHIIo-rwwoDvQgj-XreHOy3on3RiET6AB5O7n-va2WoFgjIGr3-ZAhvHF81UZMClKOXiKkwTfiTuuFL554dmcFtIf5TBSwJXCKf69juc0xjB_iuDw", "https://blogger.googleusercontent.com/img/a/AVvXsEhPoM4QbR3Sa1SdXyNC8giz7t_ihR9x945mCaVW3gJGnO-kfzHK2_eFyP4z-JPf6lfoq1txSTucq1tDBV8LJ6fhiZaue77dPKJgkSyG_7w3jWHObLpAH5DoK7ioIeObN6SmCwN0gY7Qj_WSQmV2rh2ycoDC-IN24E4I82YuuRHsGX52osdlKffk9pbIoNU"],
            variants: [ { name: "500 Gram", price: 35000 }, { name: "5 Kg (Dus)", price: 290000 } ]
        },
        { 
            id: 103, cat: "kurma", name: "Sukari Kemasan Ekonomis", price: 65000, 
            info: "Kurma Basah", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEiSJQddn4KLrvKRATqaTUIKd4HeUm0CaV1gvFoV17m2zDTZsiWVlCk9P1LIouv84C6V9ku1hp7ERahwXtzSBzOudsfKVVJxW3Kr0D50ivOBavfFkxg-Z0o-vKcGDFwCexbP4NBUZaD7IKyTdHGQzgJjlhGvBFKKRXLVqJaXE14R6ciQZtWfBodeSoYvvMY", "https://blogger.googleusercontent.com/img/a/AVvXsEiZAuu9WuIGOIubLsfDNLFWRLCk7Jv1Tb8BVvgDH56LVZfy4EO8aoo5vhVUAWGfhgKGStzi9IzdQySo_I6ypY-TpaURbyQU4NOEQ6sAUjNCQYawStxcR9GmXiyWMUHgqLoeZzUvOWDxObEN2m6i08BmUZ_QMTvTWHv8YOCRploiqHiGQqORIUnpjYGAfZE"],
            variants: [ { name: "400 Gram", price: 35000 }, { name: "850 Gram (Ember)", price: 65000 }, { name: "3 Kg (Dus)", price: 180000 } ]
        },
        { 
            id: 201, cat: "pakaian", name: "Al-Noor Premium Katun", price: 320000, 
            info: "Baju Koko", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEhTYJyYg0KPrRUhBNBbRS26infGZNn7t8CrKKAC1b5KI-vHQDfxoqWnuVqzFsXDQOb43MUDAfUobOSqdz9F-Js3x7diiszevX89nxORLmyjZjeNwax2uz5JbYJC1grLiYfX4KQcgHxsvqlY38q0u1hzJmhuQvhjzBwt3xeOOZ0d-L5_LHS4_9cIUTvgwr8", "https://blogger.googleusercontent.com/img/a/AVvXsEixLfWOVE8vl4B6Zw7WFQ71vAtSJXf3q_ImHROFhdItvdZaJC5B0xW8RO9L1vum-RhRDK-VeKnNT8rnSMmovxLqPV20pSZrWmMqm1y2Dz72OV0Ol-R-ifp6Bl7InDmkU_HIsSi8ut_JxH_X_JObPH9EeIjK_kuY1RbkKmeNyBPd76gL7qCGOjbj_c_DL0M"],
            variants: [ { name: "Size Anak (S-L)", price: 180000 }, { name: "Size Remaja (XL-XXL)", price: 220000 }, { name: "Size Dewasa (S-XL)", price: 320000 } ]
        },
        { 
            id: 204, cat: "pakaian", name: "Jubah Al Haramain Putih", price: 350000, 
            info: "Impor", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEgnTfb16kmRPNDVflf77n0hRK4mPXElgegoDIu8q0sHPSgUuSBI8sQ0AX363MxUiwEMDwJnHEaD7-H7fDjn2CCf3mAfvBYivYV5rQIjvR0dY3eZFyv1FSteLSYRAW688tDNHAcA6ig7uMTTwRLjJs6z6mz7knJuNN1uZOn_LGkqEed0b5zfKStbnq1qJqw", "https://blogger.googleusercontent.com/img/a/AVvXsEjIlzscQoMDDvmhsJPey2U3LwZaLHqUXoKnNc1ydnoji7PHp4CBkuOEWcsi8A2kesMphpw7xMy4ctnFaZho4FckM_Mo_yFnEcxc-rOH6sDEO7_6iFZALgC3euWXgJMFiEOXJfL3JG8FdyZm6kcsbkyx5TtDpZ7qEBLNmZLintyIbdYcbIX3OKwfAnj1-TM"],
            variants: [ { name: "Size Anak", price: 210000 }, { name: "Size Remaja", price: 270000 }, { name: "Size Dewasa", price: 350000 } ]
        },
        { 
            id: 399, cat: "minuman", name: "Jahe Merah AMH", price: 18000, 
            info: "Minuman", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEiBFa_q7CtHbFeoVQVJnhxQ5gilGYGbFgf-sPoDmiYqLjpDROAgbnF_X9hTCUnzlH2v-nJdOguivLGZSC0TsOwZ1rjOc8Nf1rB7jBSWf7PnHu9jeRj9NWAKa5bfRf2FUgVx94CvrRFWO0F1pi2EdfMvCx1oo7wPFp-sqbKqK3u8tDQNkjszE4WvjV2wj7w", "https://blogger.googleusercontent.com/img/a/AVvXsEj9L-ZQOC3DqQZwBhC2HqS9cBAepqtgviP8gdtkEYaDfbCt6y4P6kpwZ_ltDu-shZiQ7V7G5rmY_5aQzKydbuGz9qZRHSROFI6kjuIBh1RMaA7vsqRquc8kVqRCOolonV9GyTTmqFA_Ba6m9g56QPp2zNNr4X4NPeCBajkhSuA1izcaMGuBG_wNasq0MMg"],
            variants: [ { name: "1 Renteng (10 Sachet)", price: 18000 }, { name: "1 Bal (20 Renteng)", price: 340000 } ]
        },
        { id: 106, cat: "kurma", name: "Kurma Ajwa Al-Madinah", price: 70000, 
            info: "Kurma Nabi", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEge3ETojmZuh7crBuUnDZ6vbL-yWPqtjYmvrhOs0kUD8NbP4K9OMh4zFXUQ0QqwjE9tjnhP6SA8UOkfj78qu6lhb_1U3dQ0qGCiJZEsCN_z8BEIaJDL8DCvi_fbHqsGg5uJ5thk29fIPAeJrAbu1CPsRlR_5NxqZ2PX2LJ4YrUFnXjbNJJMYKAmJIB1kSE", "https://blogger.googleusercontent.com/img/a/AVvXsEjUT1guhNoBhTj4wt9QykVytAds9H45MOs6apG7yIr7ivDUZvv2mZhvfZ3VZ6uZtbaRXwvoZhVoUSe-wEED0taTiQsEoxMsSRmE8-lO_sTHRUH2XRJCd5m0x8oqO7m3RhlOiA1ECEwRNpc5xAiFOvx7p_ykITWZ2Bi1kTNiM7Z2IH5HgAd-aQDPi_Veqks"], 
            variants: [{name: "500 Gram", price: 70000}, {name: "1 Kg", price: 135000}] 
        },
        { id: 301, cat: "makanan", name: "Coklat Turkey Truffle", price: 170000, 
            info: "Mix Rasa", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEj6egarq3OMPJkpAvVpmZ_OOc6Xh5ZpGh6VW-JrTcgXWHf9SPSexX-EOt5NJFBkXK_WTAJIVbC_KtncDUxqC8v05pDf8X6J2ieR5Q4Gm67sPxESz49BxEzEtP2PNNgGWvU7JDorZ0Gf3CFoX7gfjM3K9azQLOFr6_1x_auzQKnArOJsMxrAqGp8Rzobr5s"] 
        },
        { id: 401, cat: "minuman", name: "Madu Vidat Kids", price: 99000, 
            info: "175gr", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEiuhPcrmbXmPsUf_HBPG1ocBvaIgNOoGI2Q0TTf4pa2a5iEjiaYLNym-dD38Xpbnw1YS__ux_Gh64R6k8p8Yg2D85AWvDJNc_pPnmw_SJFYcTrjSmzOiNAoHVbFXOeNbJvPlk5avBWOc2qu46e8kRDt586bzt-7iRTRC8lB60ehnMSMry8WpVEBJN8aHjSt", "https://blogger.googleusercontent.com/img/a/AVvXsEg30EjqVBFH6t8ifsYzjJE-Z4nWeBuyv6WgsTtfjEKHKgz7nc9CQIQgZ9_Z_WThqqNvW6zEoak5nuOiauKxl1ENJ7kdVCZcsTv9yQvOPR4_lycS1HHaSVReSWmFKZXrHFrwHBqsO-wRvVDdRhSs8xuvSoGnm7-YnQopGd-Y7BaIfVBNhaxtvMqwuXjT4Zse"] 
        },
        { id: 404, cat: "minuman", name: "Teh Kumis Kucing", price: 30000, 
            info: "20 Kantong", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEhtkMA7ncH7lmdSQ6BN1DW_QEBPbneAH8bwhwPSTR0qt5XABAyEKVjjoLpW6V6ejwuvyRjroabzC-uwphlN8y4rg1-U0eBJ6vfTmUtwjZpuAUhGJxSfmQzaqNSv2rwos2x6gAqGt5gE2wGR-pUp_5Heluzcnit-IclTsJ_hynMrCBtJs7AmCxxZseg9sKZJ", "https://blogger.googleusercontent.com/img/a/AVvXsEjcKqTBs2tpQhcN9Y2SMnLZaJM2tLVDJW5B1lgc88SVkiFWgZIrshU77rcM9nBiv4qHvhctv0vH4tnVqeVIRjal0lFjs9mnPHOLeKmtgX2Mc_7s35-WRkl11l2jMVZHIE1zNKjrh_FnuriifJmabYLCqptdUKC_FcsMiQfHV7PfZuKhwqlyAehBlpj_ij2t"] 
        },
        { id: 500, cat: "makanan", name: "Kue Nastar", price: 85000, 
            info: "Premium/Ekonomis", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEgnKzhzqNDEe3HHAtjni4qAbhLzTSxNeCLFrpKGlGe8BqBEaDKCp45L-rRCSkgACT1sWYK6bcwtsX-LTskoBgKVQDznip3V8JZzCct04NtLSTsZUd6lbr-l0S2_OCPXXU2hu2ZCjNFhsL2pIQwBftX4KZeWlGblmLjVMg_Usc1BT1bLE7HT05rftOK3gcsk", "https://blogger.googleusercontent.com/img/a/AVvXsEgeBYlZQjtd8Bl_qy-n9icn7VEf_0Vte6zkgv5LIRZmBOTogxxUOnQUiZIutzWvNbWFi4NrG20Erj840Iv3sCfNxtzAci34nvtBVW1F-9sBMMzCe0GSaMCGuG2pLo5DFVz4ZsvwACPj6JPXz9YhOkx6BDY7XyvjHayJJ8pTZ05b1WpzxVdnMC6R8Yv1YzH5"], 
            variants: [{name: "Premium 600ml", price: 85000}, {name: "Ekonomis 600ml", price: 55000}] 
        },
        { id: 501, cat: "makanan", name: "Kue Thumbprint", price: 55000, 
            info: "Strawberry/Coklat", images: ["https://blogger.googleusercontent.com/img/a/AVvXsEjHDSohLotwTPuDQXBWfP5ku97Ba3p24O96_WdJh26I9DwvBj1Oy92l_8owWouXHX3J_hwis6pJrufKCpAqIx-MoxWEGyeUD2SW-cSNCIcXtIIccXuclSrHvNaOt6NqbDGafVVKbNg-I5Kn4hVTDlBZER9s7SBqopEv3qabQ2JwJlS0Enzi2VE1dU_C5mtk"], 
            variants: [{name: "Strawberry 600ml", price: 55000}, {name: "Coklat 600ml", price: 55000}] 
        }
        ];

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let currentCat = 'all';
    let imgState = {};
    let currentModalImgIdx = 0; // Independent modal slider index

    products.forEach(p => imgState[p.id] = 0);

    function renderStore() {
        const term = document.getElementById("searchInput").value.toLowerCase();
        const grid = document.getElementById("productGrid");
        grid.innerHTML = "";

        const filtered = products.filter(p => 
            (currentCat === 'all' || p.cat === currentCat) && 
            p.name.toLowerCase().includes(term)
        );

        filtered.forEach(p => {
            let idx = imgState[p.id];
            let displayPrice = p.price;
            let priceLabel = "";
            let arrows = "";
            let dots = "";

            if(p.variants && p.variants.length > 0) {
                displayPrice = Math.min(...p.variants.map(v => v.price));
                priceLabel = `<span class="start-from">Mulai dari</span><br>`;
            }

            // Slider Logic for Card
            if(p.images.length > 1) {
                dots = `<div class="dots-container">${p.images.map((_,i) => `<div class="dot ${i===idx?'active':''}"></div>`).join('')}</div>`;
                arrows = `
                <button class="slider-btn prev-btn" onclick="slideImg(event, ${p.id}, -1)">‚ùÆ</button>
                <button class="slider-btn next-btn" onclick="slideImg(event, ${p.id}, 1)">‚ùØ</button>`;
            }

            grid.innerHTML += `
            <div class="card">
                <div class="img-wrapper">
                    <img src="${p.images[idx]}" class="card-img" id="img-${p.id}" loading="lazy">
                    ${arrows} ${dots}
                </div>
                <div class="card-body">
                    <span class="product-cat">${p.cat}</span>
                    <h3 class="product-name">${p.name}</h3>
                    <div class="product-info">${p.info}</div>
                    <div class="product-price">${priceLabel}Rp ${displayPrice.toLocaleString()}</div>
                    <div class="card-actions">
                        <button class="btn-outline" onclick="openDetail(${p.id})">Detail</button>
                        <button class="btn-fill" onclick="openDetail(${p.id})">Pilih Varian</button>
                    </div>
                </div>
            </div>`;
        });
    }

    function slideImg(e, id, dir) {
        e.stopPropagation();
        const p = products.find(x => x.id === id);
        let idx = imgState[id] + dir;
        if(idx < 0) idx = p.images.length - 1;
        if(idx >= p.images.length) idx = 0;
        imgState[id] = idx;
        
        const img = document.getElementById(`img-${id}`);
        img.style.opacity = 0;
        setTimeout(() => { img.src = p.images[idx]; img.style.opacity = 1; }, 200);
        renderStore();
    }

    function filterCat(cat, btn) {
        currentCat = cat;
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderStore();
    }

    // MODAL VARIAN LOGIC
    let currentSelectedVariant = null;
    let currentProduct = null;

    function openDetail(id) {
        currentProduct = products.find(x => x.id === id);
        currentModalImgIdx = 0; // Reset modal slider to first image
        let variantHtml = "";
        
        if (currentProduct.variants && currentProduct.variants.length > 0) {
            currentSelectedVariant = currentProduct.variants[0]; 
            let options = currentProduct.variants.map((v, idx) => 
                `<option value="${idx}">üì¶ ${v.name} - Rp ${v.price.toLocaleString()}</option>`
            ).join('');
            variantHtml = `
            <div class="variant-group">
                <label class="variant-label">Pilih Ukuran / Tipe:</label>
                <select id="variantSelect" class="variant-select" onchange="changeVariant(this.value)">${options}</select>
            </div>`;
        } else {
            currentSelectedVariant = null;
        }

        // Generate Slider Buttons for Modal if needed
        let modalSliderControls = "";
        if(currentProduct.images.length > 1) {
            modalSliderControls = `
                <button class="modal-slider-btn modal-prev" onclick="slideModalImg(-1)">‚ùÆ</button>
                <button class="modal-slider-btn modal-next" onclick="slideModalImg(1)">‚ùØ</button>
            `;
        }

        document.getElementById("modalContent").innerHTML = `
            <div class="modal-img-wrapper">
                <img id="modalMainImg" src="${currentProduct.images[0]}" class="modal-main-img">
                ${modalSliderControls}
            </div>
            
            <h2 style="color:var(--text-main); font-family:'Playfair Display', serif; margin-bottom:5px;">${currentProduct.name}</h2>
            <div id="modalPriceDisplay" style="font-size:24px; font-weight:bold; color:var(--gold); margin-bottom:15px;">
                Rp ${(currentSelectedVariant ? currentSelectedVariant.price : currentProduct.price).toLocaleString()}
            </div>
            <p style="color:var(--text-muted); line-height:1.6; margin-bottom:15px; font-size:14px;">
                Produk kualitas premium <b>${currentProduct.name}</b>. Cocok untuk kebutuhan keluarga atau hadiah spesial, Tafaddol di Chekcout.
            </p>
            ${variantHtml}
            <button class="btn-fill" style="width:100%; padding:15px; margin-top:20px; font-size:16px;" onclick="addToCartFromModal()">
                + Masukkan Keranjang
            </button>
        `;
        document.getElementById("productModal").classList.add("active");
    }

    function slideModalImg(dir) {
        if(!currentProduct) return;
        currentModalImgIdx += dir;
        if(currentModalImgIdx < 0) currentModalImgIdx = currentProduct.images.length - 1;
        if(currentModalImgIdx >= currentProduct.images.length) currentModalImgIdx = 0;
        
        const img = document.getElementById("modalMainImg");
        img.style.opacity = 0;
        setTimeout(() => {
            img.src = currentProduct.images[currentModalImgIdx];
            img.style.opacity = 1;
        }, 200);
    }

    function changeVariant(idx) {
        currentSelectedVariant = currentProduct.variants[idx];
        document.getElementById("modalPriceDisplay").innerText = "Rp " + currentSelectedVariant.price.toLocaleString();
    }

    function closeModal() { document.getElementById("productModal").classList.remove("active"); }

    function addToCartFromModal() {
        let finalName = currentProduct.name;
        let finalPrice = currentProduct.price;
        let variantName = "";

        if(currentSelectedVariant) {
            finalName = `${currentProduct.name}`;
            variantName = currentSelectedVariant.name;
            finalPrice = currentSelectedVariant.price;
        }

        const exist = cart.find(x => x.id === currentProduct.id && x.variant === variantName);
        if(exist) exist.qty++; 
        else cart.push({
            id: currentProduct.id,
            name: finalName,
            variant: variantName,
            price: finalPrice,
            image: currentProduct.images[0],
            qty: 1
        });
        
        saveCart(); renderCart(); closeModal();
        document.getElementById("cartSidebar").classList.add("active");
    }

    function renderCart() {
        const list = document.getElementById("cartList");
        let html = "", total = 0, count = 0;
        
        cart.forEach((item, i) => {
            total += item.price * item.qty;
            count += item.qty;
            let variantDisplay = item.variant ? `<div style="font-size:11px; color:var(--gold); font-weight:600; margin-top:2px;">üîπ ${item.variant}</div>` : "";

            html += `
            <div style="display:flex; gap:12px; margin-bottom:15px; border-bottom:1px solid var(--border); padding-bottom:12px;">
                <img src="${item.image}" style="width:60px; height:60px; border-radius:10px; object-fit:cover;">
                <div style="flex:1;">
                    <div style="font-weight:600; font-size:14px; color:var(--text-main); line-height:1.2;">${item.name}</div>
                    ${variantDisplay}
                    <div style="font-size:13px; color:var(--text-muted); margin-top:4px;">Rp ${item.price.toLocaleString()}</div>
                </div>
                <div style="display:flex; align-items:center;">
                    <button onclick="updCart(${i}, -1)" style="width:25px; height:25px; background:var(--bg-body); border:1px solid var(--border); border-radius:6px;">-</button>
                    <span style="font-size:14px; font-weight:bold; width:25px; text-align:center; color:var(--text-main)">${item.qty}</span>
                    <button onclick="updCart(${i}, 1)" style="width:25px; height:25px; background:var(--bg-body); border:1px solid var(--border); border-radius:6px;">+</button>
                </div>
            </div>`;
        });
        
        list.innerHTML = html || "<div style='text-align:center; color:var(--text-muted); margin-top:30px'>Keranjang kosong</div>";
        document.getElementById("totalPrice").innerText = "Rp " + total.toLocaleString();
        document.getElementById("cart-count").innerText = count;
    }

    function updCart(i, v) {
        cart[i].qty += v;
        if(cart[i].qty <= 0) cart.splice(i, 1);
        saveCart(); renderCart();
    }

    function saveCart() { localStorage.setItem("cart", JSON.stringify(cart)); }
    function toggleCart() { document.getElementById("cartSidebar").classList.toggle("active"); }

    function checkout() {
        if(!cart.length) return alert("Keranjang kosong!");
        let msg = "Assalamu'alaikum Navil Healthy, saya mau order:%0A%0A";
        let total = 0;
        cart.forEach((item, i) => {
            total += item.price * item.qty;
            let itemLine = `${i+1}. ${item.name}`;
            if(item.variant) itemLine += ` [${item.variant}]`;
            itemLine += ` (${item.qty}x)`;
            msg += `${itemLine} - Rp ${(item.price * item.qty).toLocaleString()}%0A`;
        });
        msg += `%0A*TOTAL: Rp ${total.toLocaleString()}*%0A`;
        msg += "%0AMohon info ongkir ke alamat saya.";
        window.open(`https://wa.me/6281286467275?text=${msg}`);
    }

    function toggleTheme() {
        const html = document.documentElement;
        const next = html.getAttribute("data-theme") === "dark" ? "light" : "dark";
        html.setAttribute("data-theme", next);
        localStorage.setItem("theme", next);
    }

    if(localStorage.getItem("theme") === "light") toggleTheme();
    renderStore(); renderCart();

    // HERO SLIDE
    let heroIdx = 0;
    const heroes = document.querySelectorAll('.hero-bg');
    setInterval(() => {
        heroes[heroIdx].classList.remove('active');
        heroIdx = (heroIdx + 1) % heroes.length;
        heroes[heroIdx].classList.add('active');
    }, 4000);
</script>
</body>
</html>
